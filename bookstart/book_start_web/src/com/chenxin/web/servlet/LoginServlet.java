package com.chenxin.web.servlet;import java.io.IOException;import java.net.URLEncoder;import javax.servlet.ServletException;import javax.servlet.http.Cookie;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import javax.servlet.http.HttpSession;import com.chenxin.domain.LoginUser;import com.chenxin.domain.RegisterUser;import com.chenxin.service.ProductService;/** * Servlet implementation class LoginServlet */public class LoginServlet extends HttpServlet {	private static final long serialVersionUID = 1L;	protected void doGet(HttpServletRequest request, HttpServletResponse response)			throws ServletException, IOException {		String dianhua = request.getParameter("dianhua");// 获取电话		String password = request.getParameter("password");// 获取密码		ProductService service = new ProductService();// 调用service层对象		LoginUser user = service.loginservice(dianhua, password);// 调用service层对象		HttpSession session = request.getSession();		if (user != null) {			String checkbox = request.getParameter("zidonglogin");// 获取自动登录的checkbox			if (checkbox != null) {				URLEncoder.encode(dianhua, "UTF-8");// 对电话进行编码				Cookie cookie = new Cookie("cookiedianhua", dianhua);// 创建cookie对象1				Cookie cookie1 = new Cookie("cookiepassword", password);// 创建cookie对象2				cookie.setPath(request.getContextPath());// 设置cookie携带路径				cookie.setMaxAge(1000 * 60 * 60 * 24 * 7);// 设置自动登录的最大时间				cookie1.setPath(request.getContextPath());// 设置cookie携带路径				cookie1.setMaxAge(1000 * 60 * 60 * 24 * 7);// 设置自动登录的最大时间				response.addCookie(cookie);// 把cookie响应给客户端				response.addCookie(cookie1);// 把cookie1响应给客户端			}			// 登陆成功			session.setAttribute("user", user);			response.sendRedirect("Index");		} else {			// 登录失败			request.setAttribute("loginshibai", "用户名或密码错误");			request.getRequestDispatcher("login.jsp").forward(request, response);		}	}	protected void doPost(HttpServletRequest request, HttpServletResponse response)			throws ServletException, IOException {		// TODO Auto-generated method stub		doGet(request, response);	}}